<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <title>Productos</title>
    <link href="../css/productos.css" rel="stylesheet" type="text/css">
</head>
<body>
    <div class="wrapp">
        <div class="cabecera">
            <img src="../images/erp2.jpg"> 
            <div class="bienvenida">
                <h1 id="bienvenida">Bienvenido al apartado de Productos</h1>
                <div class="menu">
                    <li onclick="redirigirAdmin()" id="IniAdmin">Clientes</li>
                    <li><a href="productos.html">Productos</a></li>
                    <li><a href="reservas.html">Reservas</a></li>
                    <li><a href="graficos.html">Gráficos</a></li>
                </div> 
            </div>         
        </div>
        <div class="apartadoStock">
            <div class="contenidoStock">
    
                <h2>Stock Habitaciones</h2>
                <div id="habitacionesStock" class="serviciosht"></div>
                
                <h2>Stock Servicios</h2>
                <div id="serviciosStock" class="serviciosht"></div>
            </div>
        </div>

        <div id="formOverlay" class="form-overlay">
            <div class="form-container">
                <h3 id="formTitle">Agregar Producto</h3>
                <form id="productoForm">
                    <div class="form-group">
                        <label for="producto">Nombre del Producto:</label>
                        <input type="text" id="producto" required>
                    </div>
                    <div class="form-group">
                        <label for="precio">Precio:</label>
                        <input type="number" id="precio" required>
                    </div>
                    <div class="button-container">
                        <button type="submit">Guardar</button>
                        <button type="button" onclick="cerrarFormulario()">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    
    </div>

    <script>
 function mostrarStock() {
    const habitacionesStock = document.getElementById('habitacionesStock');
    const serviciosStock = document.getElementById('serviciosStock');

    habitacionesStock.innerHTML = '';
    serviciosStock.innerHTML = '';

    Promise.all([
        fetch('http://localhost:3000/stock'),
        fetch('http://localhost:3000/habitaciones'),
        fetch('http://localhost:3000/servicios')  // Nuevo endpoint para servicios
    ])
    .then(([stockResponse, habitacionesResponse, serviciosResponse]) => 
        Promise.all([stockResponse.json(), habitacionesResponse.json(), serviciosResponse.json()])
    )
    .then(([stockData, habitacionesData, serviciosData]) => {
        const habitaciones = habitacionesData.habitaciones;
        const servicios = serviciosData;

        stockData.stock.habitaciones.forEach(stockItem => {
            const habitacion = habitaciones.find(h => h.id === stockItem.id);
            
            const habitacionDetails = document.createElement('div');
            habitacionDetails.classList.add('stockDetails');
            habitacionDetails.innerHTML = `
                <div class="stockField"><strong>ID:</strong> ${stockItem.id}</div>
                <div class="stockField"><strong>Nombre:</strong> ${habitacion ? habitacion.producto : 'Desconocido'}</div>
                <div class="stockField"><strong>Precio:</strong> ${habitacion ? habitacion.precio : 0}€</div>
                <div class="stockField"><strong>Cantidad:</strong> ${stockItem.cantidad}</div>
            `;

            habitacionesStock.appendChild(habitacionDetails);
        });

        // Código para servicios
        stockData.stock.servicios.forEach(stockServicio => {
            const servicio = servicios.find(s => s.id === stockServicio.id);
            
            const servicioDetails = document.createElement('div');
            servicioDetails.classList.add('stockDetails');
            servicioDetails.innerHTML = `
                <div class="stockField"><strong>ID:</strong> ${stockServicio.id}</div>
                <div class="stockField"><strong>Nombre:</strong> ${servicio ? servicio.producto : 'Desconocido'}</div>
                <div class="stockField"><strong>Precio:</strong> ${servicio ? servicio.precio : 0}€</div>
                <div class="stockField"><strong>Cantidad:</strong> ${stockServicio.cantidad}</div>
            `;

            serviciosStock.appendChild(servicioDetails);
        });
    })
    .catch(error => {
        console.error('Error:', error);
        habitacionesStock.innerHTML = `<p>Error al cargar el Stock: ${error.message}</p>`;
    });
}
        
        // Call the function when page loads
        window.onload = mostrarStock;
        </script>
</body>
</html>
holaaaaSSS